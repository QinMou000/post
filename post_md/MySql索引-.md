<blockquote> <br> <p style="text-align:center;"><img alt="" height="412" src="https://i-blog.csdnimg.cn/direct/6cba51481e444fb6b602b9ddab2084cd.png" width="854" /></p> <br> <p style="text-align:center;">✨✨作者主页：<a href="https://blog.csdn.net/2301_80194476?spm=1000.2115.3001.5343" title="嶔某">嶔某</a>✨✨</p> <br> <p style="text-align:center;">✨✨所属专栏：<a href="https://blog.csdn.net/2301_80194476/category_12841400.html?spm=1001.2014.3001.5482" title="MySql">MySql</a>✨✨</p> <br></blockquote> <br><p>我们知道，数据库里面会有成千上万条数据，我们会对这些数据进行CURD操作，如果我要在海量数据中查找一条特定的数据，不可能让数据库遍历这些数据。那么在数据库底层一定有一种数据结构，以便于我们快速查找，检索信息。</p> <br><p>那么这种数据结构是什么？它是怎么和信息匹配到一起的？它和本文要说的索引是什么关系？</p> <br><p>这一切的开始，我们先来认识一下磁盘，也就是数据库存储数据的地方。</p> <br><h2>认识磁盘</h2> <br><p>MySql给用户提供数据存储服务，存储的数据都放在磁盘上，磁盘是计算机的一个机械设备，相较于其他电子元件，磁盘的IO效率是较低的。再加上IO本身对操作系统的资源消耗，如何提高IO效率就成为了MySql的一个重要话题。</p> <br><p><img alt="" height="481" src="https://i-blog.csdnimg.cn/direct/9d54293f17564ec2b81eee3e11fe48e9.png" width="695" /></p> <br><p>盘片： </p> <br><p><img alt="" height="522" src="https://i-blog.csdnimg.cn/direct/e5b235cc9def48bbb7321cae55344e2c.png" width="888" /></p> <br><p>扇区</p> <br><p>数据库文件，本质其实就是保存在磁盘的盘片中，也就是上面的一个个小格子中，也就是扇区。数据库很大，也很多，一定需要占用很多个扇区。</p> <br><blockquote> <br> <ul><li>从上图可以看出，靠近盘中间的扇区的空间越小，距离圆心越远，扇区越大。</li><li>那么所有扇区都默认都是512字节吗？目前我们就这样认为，因为一个扇区多大是由比特位密度决定的。</li><li>但是最新的磁盘技术，已经可以让扇区的大小不同了，但是我们暂时不考虑。</li></ul> <br></blockquote> <br><p>我们在使用Linux，所看到的大部分目录或者文件，其实都是保存在硬盘中的（不考虑内存级文件系统，如proc，sys等）</p> <br><p>所以，找到一个文件的全部，本质就是找到其在磁盘上的扇区。</p> <br><p>如果我们能定位一个扇区，那么就能找到所有扇区，因为它们的寻找方式都是一样的。</p> <br><p>定位扇区：</p> <br><p><img alt="" height="422" src="https://i-blog.csdnimg.cn/direct/f0b2b63f157a44a98b90172b5d92d2ea.png" width="658" /></p> <br><ul><li>柱面（磁道）：多盘磁盘，每盘都是双面，大小完全相等。那么同半径的磁道，整体便构成了一个柱面</li><li>每个盘面都有一个磁头，盘面和磁头的关系是一对一的</li><li>所以我们只需要知道，磁头Heads、柱面Cylinder（等价于磁道）、扇区Sector对应的编号。即可在磁盘上定位所要访问的扇区。这种磁盘定位方式叫做CHS。不过实际系统软件使用的并不是CHS，而是LBA，<span style="color:#333333;">一种线性地址，可以想象成虚拟地址与物理地址。系统将 LBA </span><span style="color:#333333;">地址最后会转化成为 </span><span style="color:#333333;">CHS </span><span style="color:#333333;">，交给磁盘去进行数据读取。但是这并不重要，知道就好。</span></li></ul> <br><p><span style="color:#333333;">那么我们在系统软件上是否就是以一个扇区（512或4096字节）进行IO交互吗？并不是</span></p> <br><ul><li><span style="color:#333333;">如果操作系统直接使用硬件提供的数据大小进行交互，那么系统的IO代码和硬件强相关，如果硬件发生变化，系统就必须跟着变。</span></li><li><span style="color:#333333;">从目前来看，单次512字节还是太小了。这意味这访问同样的数据内容，需要进行更多次的磁盘访问，带来效率降低。</span></li><li><span style="color:#333333;">文件系统的基本读取单位也不是扇区，而是数据块。</span></li></ul> <br><p><span style="color:#333333;">所以系统读取磁盘，是以块为单位的，基本单位是4KB。</span></p> <br><p></p> <br><p></p> <br><p></p> <br><p></p> <br><p style="text-align:center;"><strong>本期博客到这里就结束了，如果有什么错误，欢迎指出，如果对你有帮助，请点个赞，谢谢！</strong>  </p>