<blockquote> <br> <p style="text-align:center;"><img alt="" height="412" src="https://i-blog.csdnimg.cn/direct/6cba51481e444fb6b602b9ddab2084cd.png" width="854" /></p> <br> <p style="text-align:center;">✨✨作者主页：<a href="https://blog.csdn.net/2301_80194476?spm=1000.2115.3001.5343" title="嶔某">嶔某</a>✨✨</p> <br> <p style="text-align:center;">✨✨所属专栏：<a href="https://blog.csdn.net/2301_80194476/category_12841400.html?spm=1001.2014.3001.5482" title="MySql">MySql</a>✨✨</p> <br></blockquote> <br><h2> 库的操作</h2> <br><h3 style="background-color:transparent;">创建数据库 </h3> <br><pre><code class="hljs">CREATE DATABASE [IF NOT EXISTS] db_name [create_specification [,<br>create_specification] ...]<br>create_specification:<br>[DEFAULT] CHARACTER SET charset_name<br>[DEFAULT] COLLATE collation_name<br></code></pre> <br><p><span style="color:#b95514;">说明： </span></p> <br><ul><li><span style="color:#b95514;">大写的表示关键字 </span></li><li><span style="color:#b95514;">[] 是可选项 </span></li><li><span style="color:#b95514;">CHARACTER SET: 指定数据库采用的字符集 </span></li><li><span style="color:#b95514;">COLLATE: 指定数据库字符集的校验规则</span></li></ul> <br><p>创建名为db1的数据库</p> <br><pre><code class="hljs">create database db1;</code></pre> <br><p><span style="color:#b95514;">说明：当我们创建数据库没有指定字符集和校验规则时，系统使用默认字符集：utf8，校验规则 是：utf8_ general_ ci</span></p> <br><p>创建一个使用utf8字符集的db2数据库</p> <br><pre><code class="hljs">creat database db2 charset=utf8;</code></pre> <br><p> 创建一个使用utf字符集，并带校队规则的db3数据库</p> <br><pre><code class="hljs">create database db3 charset=utf8 collate utf8_general_ci;</code></pre> <br><h3>字符集和校验规则</h3> <br><h3>查看系统默认字符集及校验规则</h3> <br><pre><code class="hljs">show variables like 'character_set_database';<br>show variables like 'collation_database';<br></code></pre> <br><h3>查看数据库支持的字符集</h3> <br><pre><code class="hljs">show charset;</code></pre> <br><p>字符集主要是控制用什么语言，比如utf8就可以使用中文。 </p> <br><p><img alt="" height="1037" src="https://i-blog.csdnimg.cn/direct/f20108b729084c78a28a73d665dfaff2.png" width="726" /></p> <br><h3>查看数据库支持的字符集校验规则</h3> <br><pre><code class="hljs">show collation;</code></pre> <br><p><img alt="" height="457" src="https://i-blog.csdnimg.cn/direct/4b19e68469f3406fb9482ac394e1be80.png" width="894" /></p> <br><h3> 校验规则对数据库的影响</h3> <br><p>创建一个数据库，校验规则使用utf8_general_ci[不区分大小写]</p> <br><pre><code class="language-cpp">create database test1 collate utf8_general_ci;</code></pre> <br><pre><code class="language-cpp">use test1;</code></pre> <br><pre><code class="language-cpp">create table person(name varchar(20));</code></pre> <br><pre><code class="language-cpp">insert into person values('a');<br>insert into person values('A');<br>insert into person values('b');<br>insert into person values('B');</code></pre> <br><pre><code class="language-cpp">select * from person where name='a';</code></pre> <br><p><img alt="" height="181" src="https://i-blog.csdnimg.cn/direct/cfb527aa010143eca5db3b53afa20af6.png" width="410" /></p> <br><pre><code class="language-cpp">select * from person order by name;</code></pre> <br><p><img alt="" height="233" src="https://i-blog.csdnimg.cn/direct/1b05e35ed8b84e30974a72b359b8ee70.png" width="403" /> </p> <br><p>创建一个数据库，校验规则使用utf8_ bin[区分大小写]</p> <br><pre><code class="language-cpp">create database test2 collate utf8_bin;<br></code></pre> <br><pre><code class="language-cpp">use test2<br></code></pre> <br><pre><code class="language-cpp">create table person(name varchar(20));<br></code></pre> <br><pre><code class="language-cpp">insert into person values('a');<br>insert into person values('A');<br>insert into person values('b');<br>insert into person values('B');</code></pre> <br><pre><code class="language-cpp">select * from person where name='a';</code></pre> <br><p><img alt="" height="177" src="https://i-blog.csdnimg.cn/direct/eaa21e7e603f490fa30da368e6d5f47f.png" width="418" /></p> <br><pre><code class="language-cpp">select * from person order by name;</code></pre> <br><p> <img alt="" height="225" src="https://i-blog.csdnimg.cn/direct/c3984943c10d4bc3975e201ad5520b29.png" width="419" /></p> <br><h3>操作数据库 </h3> <br><p>查看数据库</p> <br><pre><code class="language-cpp">show databases;</code></pre> <br><p> 显示创建语句</p> <br><pre><code class="language-cpp">show create database 数据库名；<br></code></pre> <br><p><img alt="" height="162" src="https://i-blog.csdnimg.cn/direct/43b2015cc3964ef58bd3cc92b71d9297.png" width="1063" /></p> <br><h3 style="background-color:transparent;">修改数据库</h3> <br><pre><code class="language-cpp">ALTER DATABASE db_name<br>[alter_spacification [,alter_spacification]...]<br>alter_spacification:<br>[DEFAULT] CHARACTER SET charset_name<br>[DEFAULT] COLLATE collation_name</code></pre> <br><p><span style="color:#b95514;">说明：对数据库的修改主要指的是修改数据库的字符集，校验规则</span></p> <br><p>实例： 将 mytest 数据库字符集改成 gbk </p> <br><pre><code class="language-cpp">mysql> alter database mytest charset=gbk;<br>Query OK, 1 row affected (0.00 sec)<br>mysql> show create database mytest;<br>+----------+----------------------------------------------------------------+<br>| Database | Create Database |<br>+----------+----------------------------------------------------------------+<br>| mytest | CREATE DATABASE `mytest` /*!40100 DEFAULT CHARACTER SET gbk */ |<br>+----------+----------------------------------------------------------------+</code></pre> <br><h3>数据库删除（不推荐）</h3> <br><pre><code class="language-cpp">DROP DATABASE [IF EXISTS] db_ name;</code></pre> <br><p>执行删除之后的结果:</p> <br><ul><li>数据库内部看不到对应的数据库</li><li>对应的数据库文件夹被删除，级联删除，里面的数据表全部被删</li></ul> <br><p><span style="color:#be191c;"><strong>注意：不要随意删除数据库</strong></span></p> <br><h3>备份和恢复 </h3> <br><h4>备份 </h4> <br><p>语法： </p> <br><pre><code class="language-cpp"># mysqldump -P3306 -u root -p 密码 -B 数据库名 > 数据库备份存储的文件路径</code></pre> <br><p> 示例：将mytest库备份到文件（退出连接）</p> <br><pre><code class="language-cpp"># mysqldump -P3306 -u root -p123456 -B mytest > D:/mytest.sql<br></code></pre> <br><p>这时，可以打开看看 mytest.sql 文件里的内容，其实把我们整个创建数据库，建表，导入数据的语句 都装载这个文件中。</p> <br><h4>还原</h4> <br><pre><code class="language-cpp">mysql> source D:/mysql-5.7.22/mytest.sql;<br></code></pre> <br><h4> 注意事项</h4> <br><p>如果备份的不是整个数据库，而是其中的一张表，怎么做？</p> <br><pre><code class="language-cpp"># mysqldump -u root -p 数据库名 表名1 表名2 > D:/mytest.sql</code></pre> <br><p> 同时备份多个数据库</p> <br><pre><code class="language-cpp"># mysqldump -u root -p -B 数据库名1 数据库名2 ... > 数据库存放路径</code></pre> <br><p> 如果备份一个数据库时，没有带上-B参数， 在恢复数据库时，需要先创建空数据库，然后使用数据库，再使用source来还原。</p> <br><h3>查看连接情况 </h3> <br><p>语法 </p> <br><pre><code class="language-cpp">show processlist</code></pre> <br><p><img alt="" height="204" src="https://i-blog.csdnimg.cn/direct/ac103c8a28884eac9dab68e41e7d1f4b.png" width="982" /></p> <br><p>可以告诉我们当前有哪些用户连接到我们的MySQL，如果查出某个用户不是你正常登陆的，很有可能你的数据库被人入侵了。以后大家发现自己数据库比较慢时，可以用这个指令来查看数据库连接情况。 </p> <br><h2> 表的操作</h2> <br><h3>创建表</h3> <br><p>语法</p> <br><pre><code class="language-cpp">CREATE TABLE table_name (<br>field1 datatype,<br>field2 datatype,<br>field3 datatype<br>) character set 字符集 collate 校验规则 engine 存储引擎;<br></code></pre> <br><p> 说明：</p> <br><ul><li>field 表示列名</li><li>datatype 表示列的类型</li><li>character set 字符集，如果没有指定字符集，则以所在数据库的字符集为准</li><li>collate 校验规则，如果没有指定校验规则，则以所在数据库的校验规则为准</li></ul> <br><p><img alt="" height="197" src="https://i-blog.csdnimg.cn/direct/474e7f077a7c4446b6cd95a8efc35e31.png" width="502" /></p> <br><p>说明：</p> <br><p>不同的存储引擎，创建表的文件不一样。</p> <br><p>users 表存储引擎是 MyISAM ，在数据目中有三个不同的文件，分别是：</p> <br><ul><li>users.frm：表结构</li><li>users.MYD：表数据</li><li>users.MYI：表索引</li></ul> <br><p><img alt="" height="249" src="https://i-blog.csdnimg.cn/direct/d4245d1cc45c4c7a8edf78004be866c0.png" width="746" /></p> <br><p><img alt="" height="233" src="https://i-blog.csdnimg.cn/direct/9c2fa45ed88b472f9dd1da3ae050c273.png" width="916" /></p> <br><p>备注：创建一个engine是innodb的数据库，观察存储目录</p> <br><h3>查看表结构</h3> <br><pre><code class="language-cpp">desc 表名;</code></pre> <br><p><img alt="" height="231" src="https://i-blog.csdnimg.cn/direct/5c8adfb2452c431c950d78a3cb188d54.png" width="555" /> </p> <br><h3>修改表 </h3> <br><p>在项目实际开发中，经常修改某个表的结构，比如字段名字，字段大小，字段类型，表的字符集类型， 表的存储引擎等等。我们还有需求，添加字段，删除字段等等。这时我们就需要修改表。 </p> <br><pre><code class="language-cpp">ALTER TABLE tablename ADD (column datatype [DEFAULT expr][,column<br>datatype]...);<br>ALTER TABLE tablename MODIfy (column datatype [DEFAULT expr][,column<br>datatype]...);<br>ALTER TABLE tablename DROP (column);</code></pre> <br><p>案例：  </p> <br><ul><li> 在users表添加二条记录</li></ul> <br><pre><code class="language-cpp">insert into users values(1,'a','b','1982-01-04'),(2,'b','c','1984-01-04');</code></pre> <br><ul><li>在users表添加一个字段，用于保存图片路径 </li></ul> <br><pre><code class="language-cpp">mysql> alter table users add assets varchar(100) comment '图片路径' after<br>birthday;<br></code></pre> <br><p><img alt="" height="249" src="https://i-blog.csdnimg.cn/direct/db91c16925c44526b894c334472ee2eb.png" width="582" /> </p> <br><p> 插入新字段后，对原来表中的数据没有影响： </p> <br><p><img alt="" height="187" src="https://i-blog.csdnimg.cn/direct/257a9417cbd74d4da95859157923a64d.png" width="472" /> </p> <br><ul><li>修改name，将其长度改成60 </li></ul> <br><pre><code class="language-cpp">alter table users modify name varchar(60);</code></pre> <br><p> <img alt="" height="349" src="https://i-blog.csdnimg.cn/direct/8960009a45c747b090ee014f8c9e38ed.png" width="555" /></p> <br><ul><li>删除password列</li></ul> <br><p><span style="color:#be191c;"><strong>注意：删除字段一定要小心，删除字段及其对应的列数据都没了</strong></span></p> <br><pre><code class="language-cpp">alter table users drop password;</code></pre> <br><p> <img alt="" height="312" src="https://i-blog.csdnimg.cn/direct/ec20eda89f2e401d9818991f640c2e6f.png" width="552" /></p> <br><ul><li>修改表名为employee </li></ul> <br><pre><code class="language-cpp">alter table users rename to employee; // to可以省掉</code></pre> <br><p> <img alt="" height="191" src="https://i-blog.csdnimg.cn/direct/e4bbe677678e4913b42ec95ccf1ac0b2.png" width="366" /></p> <br><ul><li>将name列修改为xingming </li></ul> <br><pre><code class="language-cpp">alter table employee change name xingming varchar(60); --新字段需要完整定义</code></pre> <br><p> <img alt="" height="316" src="https://i-blog.csdnimg.cn/direct/40435229415f40679247dcb7dd107670.png" width="568" /></p> <br><h3>删除表 （不推荐）</h3> <br><p>语法 </p> <br><pre><code class="language-cpp">DROP [TEMPORARY] TABLE [IF EXISTS] tbl_name [, tbl_name] ...</code></pre> <br><pre><code class="language-cpp">drop table t1</code></pre> <br><p><img alt="" height="51" src="https://i-blog.csdnimg.cn/direct/7ee5d7b383ec4ab7942f6564bb3f1ef1.png" width="346" /></p>